import{B as j,w as b,r as m,j as a}from"./index-CWCk8Mfu.js";import{f as v,p as C}from"./api-helnlucg.js";import{C as g}from"./CRow-D5FXM-Wo.js";import{C as P}from"./CCol-DELpJvbl.js";import{C as N,a as f}from"./CCardBody-CjD5VXLl.js";import{C as y}from"./CCardHeader-DfyZxt5z.js";import{C as w}from"./CForm-CjIivhzA.js";import{C as o}from"./CFormLabel-C5kMTk4Z.js";import{C as c}from"./CFormInput-9pZ0Cm2L.js";import{C as h}from"./CFormCheck-DWewtuPX.js";import{a as z}from"./index.esm-CtJdof8l.js";const M=()=>{const u=j(),{showToast:l}=b(),[s,t]=m.useState({id:0,name:"",localName:"",slug:"",categoryId:0,incStep:1,desc:"",multiSize:!1,show:!0,showOnHome:!0,returnable:!0,qty:0,oPrice:0,bPrice:0,media:[],sizes:[]}),i=e=>{const{name:r,value:n}=e.target;t({...s,[r]:n})},d=e=>{const{name:r,checked:n}=e.target;t({...s,[r]:n})},p=async()=>{try{const e=await v("/api/product/"+u.id);t({id:e.id,name:e.name,localName:e.localName,slug:e.slug,categoryId:e.categoryId,incStep:e.incStep,desc:e.desc,multiSize:e.multiSize,show:e.show,returnable:e.sizes[0].returnable,showOnHome:e.showOnHome,unit:e.unit,qty:parseInt(e.sizes[0].qty),oPrice:parseFloat(e.sizes[0].oPrice),bPrice:parseFloat(e.sizes[0].bPrice),media:e.media,sizes:e.sizes})}catch(e){l("danger","Error occured "+e)}};m.useEffect(()=>{p()},[]);const x=async()=>{let e={...s};e.slug=e.name.replace(/[^\w]/g,"_"),s.multiSize||(e.sizes[0].name=e.name,e.sizes[0].localName=e.localName,e.sizes[0].qty=parseInt(e.qty),e.sizes[0].oPrice=parseFloat(e.oPrice),e.sizes[0].bPrice=parseFloat(e.bPrice),e.sizes[0].dPrice=-1,e.sizes[0].show=!0,e.sizes[0].returnable=e.returnable,e.sizes[0].showOnHome=e.showOnHome,delete e.oPrice,delete e.bPrice,delete e.qty);try{const r=await C("/api/product/"+e.id,e);r!=null&&r.id?l("success","Product updated successfully"):l("danger","Error occured, please try again later.")}catch(r){l("danger","Error occured "+r)}};return a.jsx(g,{children:a.jsx(P,{xs:12,children:a.jsxs(N,{className:"mb-4",children:[a.jsx(y,{children:a.jsx("strong",{children:"Edit Product"})}),a.jsx(f,{children:a.jsxs(w,{children:[a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-6",children:[a.jsx(o,{htmlFor:"pname",children:"Product Name"}),a.jsx(c,{type:"text",id:"pname",placeholder:"Product Name",name:"name",value:s.name,onChange:i,required:!0,feedbackInvalid:"Please provide name.",feedbackValid:"Looks good!"}),a.jsx("div",{className:"invalid-feedback",children:"Product name is required"})]}),a.jsxs("div",{className:"col-6",children:[a.jsx(o,{htmlFor:"plname",children:"Local Name"}),a.jsx(c,{type:"text",id:"plname",placeholder:"Local Name",name:"localName",value:s.localName,onChange:i,required:!0,feedbackInvalid:"Please provide Local name.",feedbackValid:"Looks good!"}),a.jsx("div",{className:"invalid-feedback",children:"Local name is required"})]})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-4",children:[a.jsx(o,{htmlFor:"qty",children:"Product Quantity"}),a.jsx(c,{type:"number",id:"qty",placeholder:"0",min:"1",name:"qty",value:s.qty,onChange:i,required:!0}),a.jsx("div",{className:"invalid-feedback",children:"Quantity must be greater than 0"})]}),a.jsxs("div",{className:"col-4",children:[a.jsx(o,{htmlFor:"bPrice",children:"Base Price"}),a.jsx(c,{type:"number",id:"bPrice",placeholder:"0",min:"1",name:"bPrice",value:s.bPrice,onChange:i,required:!0}),a.jsx("div",{className:"invalid-feedback",children:"Base price must be greater than 0"})]}),a.jsxs("div",{className:"col-4",children:[a.jsx(o,{htmlFor:"oPrice",children:"Selling Price"}),a.jsx(c,{type:"number",id:"oPrice",placeholder:"0",min:"1",name:"oPrice",value:s.oPrice,onChange:i,required:!0}),a.jsx("div",{className:"invalid-feedback",children:"Selling price must be greater than 0"})]})]}),a.jsx("div",{className:"row mb-2",children:a.jsx("div",{className:"col-6",children:a.jsx(h,{id:"show",label:"Show for invoicing",name:"show",checked:s.show,value:s.show,onChange:d})})}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-sm-3",children:a.jsx(h,{id:"showOnHome",label:"Can deliver",name:"showOnHome",checked:s.showOnHome,value:s.showOnHome,onChange:d})}),a.jsx("div",{className:"col-9",children:a.jsx(c,{type:"text",id:"unit",placeholder:"Unit e.g KM, Day, Month etc",name:"unit",value:s.unit,onChange:i})})]}),a.jsx("div",{className:"mb-3",children:a.jsx(z,{color:"success",onClick:x,children:"Update"})})]})})]})})})};export{M as default};
