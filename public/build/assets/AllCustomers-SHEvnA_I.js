import{m as b,r as t,w as j,j as s}from"./index-CWCk8Mfu.js";import{M as w}from"./mantine-react-table.esm-D7ROjfMt.js";import{f as y,k as E}from"./api-helnlucg.js";import{C as D}from"./ConfirmationModal-BDazWx1C.js";import{C as M}from"./CRow-D5FXM-Wo.js";import{C as r}from"./DefaultLayout-CWVqZZSL.js";import"./Table-DlhIHgLf.js";import"./CModalTitle-C4XdBZVB.js";import"./index.esm-CtJdof8l.js";import"./cil-mobile-C0RpYdWd.js";const N=()=>{const n=b(),[l,d]=t.useState([]),[o,m]=t.useState(),[u,a]=t.useState(!1),{showToast:c}=j(),i=async()=>{try{const e=await y("/api/customer");d(e)}catch(e){c("danger","Error occured "+e)}};t.useEffect(()=>{i()},[]);const h=e=>{m(e),a(!0)},p=async()=>{try{await E("/api/customer/"+o.id),a(!1),i()}catch(e){c("danger","Error occured "+e)}},f=e=>{n("/customer/edit/"+e.id)},C=[{accessorKey:"index",header:"Id"},{accessorKey:"name",header:"Name"},{accessorKey:"mobile",header:"Mobile"},{accessorKey:"status",header:"Status",Cell:({cell:e})=>e.row.original.show==1?s.jsx(r,{color:"success",children:"Visible"}):s.jsx(r,{color:"danger",children:"Hidden"})},{accessorKey:"actions",header:"Actions",Cell:({cell:e})=>s.jsxs("div",{children:[s.jsx(r,{role:"button",color:"info",onClick:()=>f(e.row.original),children:"Edit"}),"Â ",s.jsx(r,{role:"button",color:"danger",onClick:()=>h(e.row.original),children:"Delete"})]})}],g=l.map((e,x)=>({...e,index:x+1}));return s.jsxs(M,{children:[s.jsx(D,{visible:u,setVisible:a,onYes:p,resource:"Delete customer - "+(o==null?void 0:o.name)}),s.jsx(w,{enableColumnResizing:!0,columns:C,data:g,enableFullScreenToggle:!1})]})};export{N as default};
