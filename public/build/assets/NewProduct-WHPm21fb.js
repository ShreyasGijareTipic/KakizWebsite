import{w as j,r as b,j as e}from"./index-CWCk8Mfu.js";import{h as v}from"./api-helnlucg.js";import{C}from"./CRow-D5FXM-Wo.js";import{C as g}from"./CCol-DELpJvbl.js";import{C as N,a as P}from"./CCardBody-CjD5VXLl.js";import{C as f}from"./CCardHeader-DfyZxt5z.js";import{C as y}from"./CForm-CjIivhzA.js";import{C as o}from"./CFormLabel-C5kMTk4Z.js";import{C as l}from"./CFormInput-9pZ0Cm2L.js";import{C as u}from"./CFormCheck-DWewtuPX.js";import{a as x}from"./index.esm-CtJdof8l.js";const E=()=>{const{showToast:t}=j(),[r,n]=b.useState({name:"",localName:"",slug:"",categoryId:0,incStep:1,desc:"",multiSize:!1,show:!0,returnable:!0,showOnHome:!0,unit:"",qty:0,oPrice:0,bPrice:0,media:[],sizes:[]}),s=i=>{const{name:c,value:a}=i.target;n({...r,[c]:a})},d=i=>{const{name:c,checked:a}=i.target;n({...r,[c]:a})},p=async i=>{i.preventDefault();const c=i.target;if(!c.checkValidity()){c.classList.add("was-validated");return}let a={...r,sizes:[]};a.slug=a.name.replace(/[^\w]/g,"_"),r.multiSize||(a.sizes.push({name:a.name,localName:a.localName,qty:a.qty,oPrice:a.oPrice,bPrice:a.bPrice,dPrice:a.oPrice,stock:a.qty,show:!0,returnable:a.returnable}),delete a.oPrice,delete a.bPrice,delete a.qty);try{await v("/api/product",a)?(t("success","Product added successfully"),m()):t("danger","Error occured, please try again later.")}catch(h){t("danger","Error occured "+h)}},m=()=>{n({name:"",localName:"",slug:"",categoryId:0,incStep:1,desc:"",multiSize:!1,show:!0,returnable:!0,showOnHome:!0,qty:0,oPrice:0,bPrice:0,media:[],sizes:[]})};return e.jsx(C,{children:e.jsx(g,{xs:12,children:e.jsxs(N,{className:"mb-4",children:[e.jsx(f,{children:e.jsx("strong",{children:"Create New Product"})}),e.jsx(P,{children:e.jsxs(y,{className:"needs-validation",noValidate:!0,onSubmit:p,children:[e.jsxs("div",{className:"row mb-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(o,{htmlFor:"pname",children:"Product Name"}),e.jsx(l,{type:"text",id:"pname",placeholder:"Product Name",name:"name",value:r.name,onChange:s,required:!0,feedbackInvalid:"Please provide name.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Product name is required"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(o,{htmlFor:"plname",children:"Local Name"}),e.jsx(l,{type:"text",id:"plname",placeholder:"Local Name",name:"localName",value:r.localName,onChange:s,required:!0,feedbackInvalid:"Please provide Local name.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Local name is required"})]})]}),e.jsxs("div",{className:"row mb-2",children:[e.jsxs("div",{className:"col-4",children:[e.jsx(o,{htmlFor:"qty",children:"Product Quantity"}),e.jsx(l,{type:"number",id:"qty",placeholder:"0",min:"1",name:"qty",value:r.qty,onChange:s,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Quantity must be greater than 0"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(o,{htmlFor:"bPrice",children:"Base Price"}),e.jsx(l,{type:"number",id:"bPrice",placeholder:"0",min:"1",name:"bPrice",value:r.bPrice,onChange:s,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Base price must be greater than 0"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(o,{htmlFor:"oPrice",children:"Selling Price"}),e.jsx(l,{type:"number",id:"oPrice",placeholder:"0",min:"1",name:"oPrice",value:r.oPrice,onChange:s,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Selling price must be greater than 0"})]})]}),e.jsx("div",{className:"row mb-2",children:e.jsx("div",{className:"col-6",children:e.jsx(u,{id:"show",label:"Show for invoicing",name:"show",checked:r.show,onChange:d})})}),e.jsxs("div",{className:"row mb-2",children:[e.jsx("div",{className:"col-sm-3",children:e.jsx(u,{id:"showOnHome",label:"Can deliver",name:"showOnHome",checked:r.showOnHome,onChange:d})}),e.jsx("div",{className:"col-9",children:e.jsx(l,{type:"text",id:"unit",placeholder:"Unit e.g KM, Day, Month etc",name:"unit",value:r.unit,onChange:s})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{color:"success",type:"submit",children:"Submit"}),"Â ",e.jsx(x,{color:"secondary",onClick:m,children:"Clear"})]})]})})]})})})};export{E as default};
