import{m as w,r as t,w as b,j as o}from"./index-CWCk8Mfu.js";import{M as P}from"./mantine-react-table.esm-D7ROjfMt.js";import{f as j,k as K}from"./api-helnlucg.js";import{C as E}from"./ConfirmationModal-BDazWx1C.js";import{C as D}from"./CRow-D5FXM-Wo.js";import{C as c}from"./DefaultLayout-CWVqZZSL.js";import"./Table-DlhIHgLf.js";import"./CModalTitle-C4XdBZVB.js";import"./index.esm-CtJdof8l.js";import"./cil-mobile-C0RpYdWd.js";const R=()=>{const d=w(),[u,m]=t.useState([]),[a,p]=t.useState(),[h,i]=t.useState(!1),{showToast:l}=b(),n=async()=>{try{const e=await j("/api/product");m(e)}catch(e){l("danger","Error occured "+e)}};t.useEffect(()=>{n()},[]);const g=e=>{p(e),i(!0)},f=async()=>{try{await K("/api/product/"+a.id),i(!1),n()}catch(e){l("danger","Error occured "+e)}},y=e=>{d("/products/edit/"+e.id)},C=[{accessorKey:"index",header:"Id"},{accessorKey:"name",header:"Name"},{accessorKey:"localName",header:"Local Name"},{accessorKey:"basePrice",header:"Base Price",Cell:({cell:e})=>{var s,r;return((r=(s=e.row.original.sizes)==null?void 0:s[0])==null?void 0:r.bPrice)||""}},{accessorKey:"sellingPrice",header:"Selling Price",Cell:({cell:e})=>{var s,r;return((r=(s=e.row.original.sizes)==null?void 0:s[0])==null?void 0:r.oPrice)||""}},{accessorKey:"quantity",header:"Quantity",Cell:({cell:e})=>{var s,r;return((r=(s=e.row.original.sizes)==null?void 0:s[0])==null?void 0:r.qty)||""}},{accessorKey:"status",header:"Status",Cell:({cell:e})=>e.row.original.show==1?o.jsx(c,{color:"success",children:"Visible"}):o.jsx(c,{color:"danger",children:"Hidden"})},{accessorKey:"actions",header:"Actions",Cell:({cell:e})=>o.jsxs("div",{children:[o.jsx(c,{role:"button",color:"info",onClick:()=>y(e.row.original),children:"Edit"}),"Â ",o.jsx(c,{role:"button",color:"danger",onClick:()=>g(e.row.original),children:"Delete"})]})}],x=u.map((e,s)=>({...e,index:s+1}));return o.jsxs(D,{children:[o.jsx(E,{visible:h,setVisible:i,onYes:f,resource:"Delete product - "+(a==null?void 0:a.name)}),o.jsx(P,{columns:C,data:x,enableFullScreenToggle:!1})]})};export{R as default};
